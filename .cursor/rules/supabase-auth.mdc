# Supabase 인증 시스템 개발 규칙

## 파일 구조
- `src/lib/supabase.ts`: Supabase 클라이언트 설정
- `src/hooks/useAuth.ts`: 인증 상태 관리 훅
- `src/contexts/AuthContext.tsx`: 인증 컨텍스트
- `src/components/auth/`: 인증 관련 컴포넌트들

## 환경 변수
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## 인증 훅 구조
```typescript
interface AuthUser {
  id: string;
  email: string;
  // 기타 사용자 정보
}

interface AuthContextType {
  user: AuthUser | null;
  loading: boolean;
  signIn: (email: string, password: string) => Promise<void>;
  signUp: (email: string, password: string) => Promise<void>;
  signOut: () => Promise<void>;
  signInWithGoogle: () => Promise<void>;
}
```

## 보안 규칙
- 민감한 정보는 서버 사이드에서만 처리
- JWT 토큰은 httpOnly 쿠키에 저장
- 인증이 필요한 페이지는 middleware에서 체크
- RLS(Row Level Security) 정책 활용

## 에러 처리
- 모든 인증 함수는 try-catch로 에러 처리
- 사용자 친화적인 에러 메시지 제공
- 네트워크 에러, 인증 에러 등 구분하여 처리

## 컴포넌트 예시
```typescript
// 로그인이 필요한 컴포넌트에서 사용
const ProtectedComponent = () => {
  const { user, loading } = useAuth();
  
  if (loading) return <div>로딩 중...</div>;
  if (!user) return <div>로그인이 필요합니다.</div>;
  
  return <div>보호된 콘텐츠</div>;
};
```

## 테스트 계정
- 개발/테스트용 이메일 계정 사용
- 프로덕션 배포 시 실제 이메일 인증 설정 필요
description:
globs:
alwaysApply: false
---
